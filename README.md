# Телеграм-бот для анализа и прогнозирования акций на основе временных рядов
Учебный проект по дисциплине "Временные ряды"

## Цель проекта
Проект направлен на разработку телеграм-бота, который позволяет пользователю получать прогноз цен акций и рекомендации по торговым стратегиям.

## Описание функционала
Пользователь вводит тикер компании и сумму для условной инвестиции, бот автоматически загружает исторические данные о стоимости акций с [Yahoo Finance](https://finance.yahoo.com/) с помощью библиотеки yfinance, обучает несколько моделей временных рядов (Random Forest, ARIMA, LSTM), выбирает наилучшую по метрике качества RMSE и строит прогноз на ближайшие 30 дней.

В финале пользователь получает:

* график прогноза;
* оценку изменения цены акций относительно текущего дня;
* сводку с рекомендациями по дням покупки и продажи;
* расчёт потенциальной прибыли.

**Как строятся инвестиционные рекомендации:**
- Бот анализирует предсказанный ряд:
    * выделяет дни с локальными максимумами (рекомендация — продавать);
    * определяет локальные минимумы (рекомендация — покупать).
- Исходя из введённой суммы, бот рассчитывает, какой условный доход можно было бы получить при следовании этим рекомендациям.
- В конце отправляется сводка: стратегия торговли и ориентировочная прибыль.

Дополнительно бот ведёт журнал логов, где фиксируются все ключевые параметры каждого запроса. Каждый запрос пользователя фиксируется в отдельной строке файла (например, logs.csv).
Для каждой сессии сохраняются:
* ID пользователя;
* дата и время запроса;
* тикер компании;
* модель, выбранная как наилучшая;
* значение метрики RMSE;
* рассчитанная ориентировочная прибыль;
* ROI (Return on Investment);
* сумма инвестиции, указанная пользователем;
* прогноз изменения в процентах.

## Базовые инструкции бота
`/start` - старт работы бота

`/help` - помощь и получение справки о работе бота

`/analyze [ТИКЕР] [СУММА ИНВЕСТИЦИИ]` - анализ акций заданной компании и получение рекомендаций с учетом суммы инвестиций

`/exit` или `/stop` - остановка работы

---
## Настройка виртуального окружения и запуск
Клонируйте репозиторий:

```bash
git clone https://github.com/ynastt/stock-price-forecast-bot.git
cd stock-price-forecast-bot
```

Скопируйте шаблон .env файла:
```bash
cp .env.example .env
```
Отредактируйте `.env` файл под себя (вставьте токен для бота)

Создайте виртуальное окружение:
```bash
python -m venv venv
```

Активируйте виртуальное окружение:
```bash
# на Windows:
venv\Scripts\activate
# или
venv/Scripts/Activate.ps1

# на Linux/Mac:
source venv/bin/activate
```

Установите зависимости
```bash
pip install -r requirements.txt
```

Запустите бота:
```bash
python bot.py
```

## Итог
Телеграм-бот, который автоматически загружает и анализирует временные ряды цен акций, обучает разные модели, выбирает лучшую, строит прогноз на 30 дней, формирует рекомендации и ведёт журнал логов.

⚠️ Бот создан в учебных целях. Бот не является финансовым инструментом, результаты носят исключительно учебный характер.